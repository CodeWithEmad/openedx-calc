language: python

sudo: false

cache: pip

matrix:
  include:
  - python: 3.5
    env: TOXENV=py3
  - python: 3.5
    env: TOXENV=quality

addons:
  apt:
    packages:
    - libblas-dev
    - liblapack-dev
    - gfortran

install:
  - pip install tox
  - pip install coveralls

script:
  - make test

after_success:
  - coveralls

deploy:
  provider: pypi
  user: edx
  password:
    secure: bgmgzFrSpvX6HbcNy36qu7M2ahGOeU9W5fDpArtsCYOzk1qNRDpATIwa1GJuTHzyt/D+HWcO3IJaxdqkuTLYJ+I0N3pTBjLJN7cyQ0snq5anSXZqsbIKlZgim5Wf/XCL5D6WcfdO/wkzBQwiuMwQJ3VcPOMKQs31FLYTPDyaEMF59XsayVZwHtX1/AgVD5w5ZF95llNoS7XXnet7J+RNXiq/qEezZ/Fz8yar8GmdB26pLi2h4VaM83eKyJBTb6KZWD6jSn7cS5K0H+P6mxRZmP788IxnLiHmlEDY8nqC3GtnKxdFownVE+bycSVzn6lFD6sg/CrO3or5YISMvJeM07j2cfQ8rDZzGpns+07P5QfHlGnlh5B+aLXIrptntTJmJd66kwcUryo88OmS4ZoHO+9l/iGScVw06A+7MSbmVCC4gFuGaInKIsSq8asIThY24TvGjOIyQgD9h6W5kUjrQ0wvQPHn6Sj9F9aF2HkZyXIR6HVpMl5vcYO5A6qVcsH0kgBZTFSAGqMNZsYrF9hu46e4SwEhb5C1zRsZvxoSLA2raNkAlVP0Exmvvj2H5N1d0pREwvkmWM7CraotoxA4CTV4RHNUAVKsD0Mi2s4i9vlevZ8qIrwmuuJGCPSZfdt6a95cYkbdr7yh5Vq3NyU+fuH48T+KX4pNomzi+6TlxCU=
  distributions: sdist bdist_wheel
  on:
    tags: true
    python: 3.5
    condition: "$TOXENV = quality"
